!function(n){"object"==typeof module&&"object"==typeof module.exports?module.exports=n(require("jquery")):n(jQuery)}(function(n){n.fn.panoramix=function(o){this.version="1.0";var t,e,i,u,r,f,a,c=t=n(this).parent().find("img.panoramixImg"),s=n(this).find(".controls").find("a.left"),p=n(this).find(".controls").find("a.right"),v=function(n,o,t){o=o||0,t=t||function(){},0>n&&n>r&&c.animate({left:n.toString()+"px"},o,"linear",t)},l=function(n,o,t){o=o||0,t=t||function(){},v(m()+n,o,t)},m=function(){return d(),parseInt(c.css("left").split(" ")[0].replace("px",""))},d=function(){e=jQuery(t).width(),i=jQuery("body").innerWidth(),u=0,r=-e+i},g=function(){c.addClass("moving")},h=function(){c.removeClass("moving")},y=function(n){var o=c.offset().left,t=o,e=o+c.width();return!(t>n||n>e)},x=function(n,o,t){if(!y(n))return!1;var e=n-o;l(e,0,t)},j=o.interval||100,I=o.speed||50;d(),center=e/2-i/2,c.css("left","-"+center+"px");var w=function(n,o){n=n||j,o=o||I,g(),l(o,100),f=setInterval(function(){l(o,100)},n)},P=function(n,o){n=n||j,o=o||I,g(),l(-o,100),a=setInterval(function(){l(-o,100)},n)},b=function(){c.off("touchmove"),c.off("mousemove"),c.stop(!0,!0),clearInterval(f),clearInterval(a),h()};return s.on("mouseover",function(n){n.stopPropagation(),w()}).on("mouseout",function(n){n.stopPropagation(),b()}).on("touchstart",function(n){n.stopPropagation(),n.preventDefault(),w()}),p.on("mouseover",function(n){n.stopPropagation(),P()}).on("mouseout",function(n){b()}).on("touchstart",function(n){n.stopPropagation(),n.preventDefault(),P()}),c.on("mousedown",function(n){g(),n.preventDefault();var o=n.pageX;c.on("mousemove",function(n){var t=n.pageX;x(t,o,function(){o=t})})}).on("touchstart",function(n){g(),n.preventDefault();var o=n.originalEvent.touches[0].pageX;c.on("touchmove",function(n){var t=n.originalEvent.changedTouches[0].pageX;x(t,o,function(){o=t})})}),n("body").on("mouseup",function(){b()}).on("touchend",function(){b()}),n(window).on("resize",d),{moveLeft:w,moveRight:P,stopMoving:b}}});